# 🧭 Nuxt 프로젝트 라우팅 및 상태관리 흐름 분석 보고서



---

## 2. 라우팅 구조 분석

### 2.1 `pages/` 디렉토리 구조

```plaintext
pages/
├── index.vue               → /
├── about.vue               → /about
├── users/
│   ├── index.vue           → /users
│   └── [id].vue            → /users/:id
├── admin/
│   └── dashboard.vue       → /admin/dashboard

```
### 2.2 라우팅 흐름 예시

|페이지 경로|컴포넌트 파일|미들웨어|레이아웃|비고|
|---|---|---|---|---|
|`/`|`pages/index.vue`|없음|기본|홈|
|`/users/:id`|`pages/users/[id].vue`|`auth`|기본|사용자 프로필|
|`/admin/dashboard`|`pages/admin/dashboard.vue`|`adminOnly`|`admin`|관리자용 대시보드|
### 2.3 미들웨어 사용 분석

- **사용된 미들웨어 목록**:
    - `authenticated.js`
    - `demo.js`
    - `notAuthenticated.js`
    
- **사용 방식**:
definePageMeta 는 Nuxt3 전용
```
definePageMeta({
  middleware: ['auth', 'adminOnly']
})
```
미들웨어 사용 방법
1. 페이지 단위로 지정 (동적)
```js
<script>
export default {
  middleware: 'auth'  // middleware/auth.js 사용
}
</script>

또는

export default {
  middleware: ['auth', 'checkRole']
}
```
2. 전역으로 지정
사용 위치 : nuxt.config.js
```js
export default {
  router: {
    middleware: ['auth']
  }
}
```

- 이 설정을 하면 **모든 페이지에서 `middleware/auth.js`가 자동 실행**됩니다.

### 2.3 미들웨어의 실행 타이밍

|타이밍|설명|
|---|---|
|서버 사이드|SSR 중에도 실행됨 (초기 요청 처리 가능)|
|클라이언트 사이드|페이지 전환 시 실행됨 (`<NuxtLink>` 클릭 등)|

### 2.4 정적 라우팅 vs 동적 라우팅
|항목|정적 라우팅 (Static)|동적 라우팅 (Dynamic)|
|---|---|---|
|라우트 정의 방식|파일 또는 코드에 명확하게 정의된 고정 경로|URL의 일부가 변수로 처리됨 (`:id`, `[slug]` 등)|
|URL 예시|`/about`, `/contact`, `/login`|`/users/:id`, `/blog/:slug`, `/category/:name`|
|페이지 수|고정|무한히 늘어날 수 있음|
|Nuxt 파일 예시|`about.vue` → `/about`|`[id].vue` → `/users/:id`|

🧠 **요약**:
- **정적 라우팅**은 URL이 고정됨.
- **동적 라우팅**은 URL 일부를 변수로 받아 처리.











## 3. 상태관리 흐름 분석

### 3.1 상태관리 도구

- **상태관리 방식**: `Pinia`
    
- **설정 위치**: `nuxt.config.ts` > `modules: ['@pinia/nuxt']`
    

---

### 3.2 스토어 구성 예시

```
// stores/user.ts
export const useUserStore = defineStore('user', {
  state: () => ({
    user: null,
    isLoading: false
  }),
  actions: {
    async fetchUser() {
      this.isLoading = true
      this.user = await $fetch('/api/user')
      this.isLoading = false
    }
  }
})

```

---

### 3.3 스토어 사용 흐름

|사용 위치|스토어|호출 함수|사용 목적|
|---|---|---|---|
|`pages/dashboard.vue`|`useUserStore()`|`fetchUser()`|대시보드 유저 정보 호출|

### 3.4 상태 흐름 예시
```
[1] /dashboard 접속
   ↓
[2] middleware/auth → 로그인 여부 확인
   ↓
[3] userStore.fetchUser() 실행
   ↓
[4] GET /api/user
   ↓
[5] userStore.user 에 데이터 저장

```

---

## 4. 개선 포인트

| 구분     | 내용              | 제안                          |
| ------ | --------------- | --------------------------- |
| 인증 흐름  | 페이지별 미들웨어 중복 선언 | 공통 미들웨어 통합 또는 layout 단에서 처리 |
| API 호출 | 동일한 API 중복 호출   | composable 추출 및 SSR 시점에서 선호 |
| 상태관리   | loading 상태 미반영  | `isLoading` 포함하여 UX 개선      |


---

## 5. 결론 및 요약

- Nuxt의 파일 기반 라우팅 구조와 Pinia 상태관리가 잘 적용되어 있음
    
- 미들웨어 기반 인증 흐름은 명확하지만 반복 선언 개선 여지 있음
    
- API 호출의 SSR/CSR 분리, 전역 상태 활용도 향상 시 유지보수성과 성능 개선 가능


---

## 6. 부록

- [`nuxt.config.js`] 모듈 설정 요약
    
- [`stores/`] 구조 시각화
    
- [`middleware/`] 인증 흐름도