1. **`index.php` 실행** →
2. **오토로더 및 부트스트랩 로드** →
3. **HTTP 커널 실행** →
4. **서비스 프로바이더 로드** →
5. **미들웨어 처리** →
6. **라우팅 처리** →
7. **컨트롤러 실행** →
8. **뷰 렌더링** →
9. **응답 반환** →
10. **애플리케이션 종료**




### 1. **`public/index.php` 실행**

- 모든 요청은 `public/index.php` 파일에서 시작됩니다.
- 이 파일은 애플리케이션의 진입점(entry point)이며, 요청을 처리하기 위해 필요한 초기 설정을 수행합니다.
- 여기서 **오토로더(Autoloader)**와 **애플리케이션 인스턴스**가 로드됩니다.
- 해당 내용을 통해 라라벨의 요청 처리 흐름을 알 수 있음



```php
<?php

header_remove("X-Powered-By");
define('LARAVEL_START', microtime(true)); 
- `LARAVEL_START` 상수를 정의하여 애플리케이션이 시작된 시점을 기록합니다.
- `microtime(true)`는 현재 시간을 초 단위로 반환합니다.
- 이 값은 애플리케이션의 성능을 측정하거나 요청 처리 시간을 계산하는 데 사용됩니다.



require __DIR__.'/../vendor/autoload.php';
- Composer의 오토로더를 로드합니다.
- `vendor/autoload.php`는 애플리케이션에서 사용하는 모든 클래스와 라이브러리를 자동으로 로드합니다.
- Laravel은 Composer를 통해 의존성을 관리하므로, 이 파일은 필수적입니다.


$app = require_once __DIR__.'/../bootstrap/app.php';
- Laravel 애플리케이션 인스턴스를 생성합니다.
- `bootstrap/app.php` 파일은 `Illuminate\Foundation\Application` 객체를 생성하고 반환합니다.
- 이 객체는 Laravel 애플리케이션의 핵심이며, 서비스 컨테이너 역할을 합니다.
- bootstrap/app.php 확인 : `Application` 객체는 애플리케이션의 루트 디렉토리를 설정하고, 서비스 컨테이너를 초기화합니다.

$kernel = $app->make(Illuminate\Contracts\Http\Kernel::class);
- 애플리케이션의 HTTP 커널(Http Kernel)을 생성합니다.
- `Http Kernel`은 요청을 처리하고 응답을 생성하는 역할을 합니다.
- `Illuminate\Contracts\Http\Kernel`은 Laravel의 HTTP 커널 인터페이스입니다.
- 실제 구현은 `App\Http\Kernel` 클래스에 정의되어 있습니다.
- HTTP 커널은 글로벌 미들웨어, 라우트 미들웨어 등을 관리합니다.

$response = $kernel->handle(
    $request = Illuminate\Http\Request::capture()
);
- **`Illuminate\Http\Request::capture()`**:
    
    - 현재 HTTP 요청을 캡처하여 `Request` 객체를 생성합니다.
    - 이 객체는 요청 데이터를 처리하고, URL, 헤더, 입력값 등을 제공합니다.
- **`$kernel->handle($request)`**:
    
    - HTTP 커널이 요청을 처리하고 응답을 생성합니다.
    - 요청은 라우팅, 컨트롤러, 미들웨어 등을 거쳐 최종적으로 응답 객체를 반환합니다.
$response->send();
- 생성된 응답 객체를 클라이언트(브라우저)로 전송합니다.
- 응답 객체는 HTTP 상태 코드, 헤더, 본문 데이터를 포함합니다.
- 
$kernel->terminate($request, $response);
```









[오토로더]
Laravel은 composer를 사용하여 오토로딩 처리
오토로딩이란 클래스 자동 로딩을 의미
- **PHP 기본 오토로더**:
    - `spl_autoload_register`를 사용하여 클래스 파일을 자동으로 로드합니다.
- **Composer 오토로더**:
    - PSR-4 표준을 기반으로 네임스페이스와 디렉토리 구조를 매핑하여 클래스를 로드합니다.
- **Laravel 오토로더**:
    - Composer 오토로더를 사용하여 `Illuminate` 및 `App` 네임스페이스의 클래스를 자동으로 로드합니다.

오토로더는 개발자가 파일을 직접 `require`하지 않아도 되도록 하여 코드의 유지보수성과 확장성을 크게 향상시킵니다.
작동방식
1. PHP 코드에서 클래스가 호출되면, Composer의 오토로더가 해당 클래스의 네임스페이스를 확인
2. 네임스페이스와 클래스 이름을 기반으로 파일 경로 계산
3. 해당 파일을 자동으로 로드

#### 전체 흐름 요약
1. **헤더 제거**:
    
    - `X-Powered-By` 헤더를 제거하여 보안을 강화합니다.
2. **애플리케이션 시작 시간 기록**:
    
    - `LARAVEL_START` 상수를 정의하여 성능 측정에 사용합니다.
3. **Composer 오토로더 로드**:
    
    - `vendor/autoload.php`를 통해 클래스와 라이브러리를 자동으로 로드합니다.
4. **애플리케이션 인스턴스 생성**:
    
    - `bootstrap/app.php`를 통해 Laravel 애플리케이션 객체를 생성합니다.
5. **HTTP 커널 생성**:
    
    - HTTP 커널은 요청을 처리하고 응답을 생성하는 역할을 합니다.
6. **요청 처리**:
    
    - 요청 객체를 캡처하고, HTTP 커널을 통해 요청을 처리하여 응답 객체를 생성합니다.
7. **응답 전송**:
    
    - 생성된 응답 객체를 클라이언트로 전송합니다.
8. **종료 작업**:
    
    - 요청과 응답이 완료된 후 추가적인 종료 작업을 수행합니다.









#### Laravel의 요청 처리 흐름

1. 클라이언트가 HTTP 요청을 보냄.
2. 요청은 `public/index.php`로 전달됨.
3. `index.php`에서 애플리케이션 부트스트랩 및 요청 처리가 시작됨.
4. 요청은 HTTP 커널을 통해 미들웨어, 라우팅, 컨트롤러를 거침.
5. 응답 객체가 생성되고 클라이언트로 전송됨.
6. 종료 작업이 실행됨.











---

### 2. **오토로더 및 부트스트랩 파일 로드**

- `index.php`는 Composer의 오토로더(`vendor/autoload.php`)를 로드하여 클래스 자동 로딩을 설정합니다.
- 이후, `bootstrap/app.php` 파일을 호출하여 애플리케이션 인스턴스를 생성합니다.

---

### 3. **HTTP 커널 실행**

- `bootstrap/app.php`에서 생성된 애플리케이션 인스턴스는 `App\Http\Kernel` 클래스를 통해 실행됩니다.
- `Kernel`은 애플리케이션의 핵심 요청 처리 로직을 포함하며, 미들웨어와 라우팅을 처리합니다.

---

### 4. **서비스 프로바이더 로드**

- 라라벨은 `config/app.php` 파일에 정의된 **서비스 프로바이더(Service Providers)**를 로드합니다.
- 서비스 프로바이더는 애플리케이션의 주요 서비스(Container, 이벤트, 라우팅 등)를 등록하고 부트스트랩합니다.
- 이 단계에서 애플리케이션의 모든 주요 구성 요소가 준비됩니다.

---

### 5. **미들웨어 처리**

- 요청은 글로벌 미들웨어와 라우트 미들웨어를 통과합니다.
- 미들웨어는 요청을 필터링하거나, 요청 전후에 특정 작업을 수행하는 데 사용됩니다.
- 예: 인증, CSRF 보호, 로깅 등.

---

### 6. **라우팅 처리**

- 요청은 `routes/web.php` 또는 `routes/api.php` 파일에 정의된 라우트와 매칭됩니다.
- 라우트는 요청 URL과 HTTP 메서드(GET, POST 등)를 기반으로 컨트롤러 또는 클로저를 호출합니다.

---

### 7. **컨트롤러 실행**

- 라우트와 매칭된 컨트롤러 메서드가 실행됩니다.
- 컨트롤러는 요청 데이터를 처리하고, 필요한 비즈니스 로직을 수행하며, 응답 데이터를 생성합니다.

---

### 8. **뷰 렌더링 (선택적)**

- 컨트롤러는 데이터를 처리한 후, 뷰(View)를 반환할 수 있습니다.
- 뷰는 Blade 템플릿 엔진을 사용하여 HTML을 생성합니다.

---

### 9. **응답 반환**

- 컨트롤러 또는 라우트에서 생성된 응답은 `Illuminate\Http\Response` 객체로 래핑됩니다.
- 이 응답은 HTTP 커널을 통해 클라이언트(브라우저)로 반환됩니다.

---

### 10. **애플리케이션 종료**

- 요청 처리가 완료되면, 애플리케이션은 종료됩니다.
- 종료 과정에서 `terminate` 미들웨어가 실행될 수 있습니다.
- 이 단계에서 로그 기록, 리소스 정리 등의 작업이 수행됩니다.