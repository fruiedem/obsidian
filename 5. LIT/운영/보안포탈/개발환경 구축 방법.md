
```table-of-contents
```

## clone
### https clone 오류
```
$ git clone https://gitlab.com/secupolicy1/secureportal.git
Cloning into 'secureportal'...
warning: ----------------- SECURITY WARNING ----------------
warning: | TLS certificate verification has been disabled! |
warning: ---------------------------------------------------
warning: HTTPS connections may not be secure. See https://aka.ms/gcm/tlsverify for more information.
remote: The project you were looking for could not be found or you don't have permission to view it.
fatal: repository 'https://gitlab.com/secupolicy1/secureportal.git/' not found
```
[해결 방법]
git config --global http.sslVerify true

### 레포지토리 못 찾는 오류
```
Cloning into 'secureportal'...
remote: The project you were looking for could not be found or you don't have permission to view it.
fatal: repository 'https://gitlab.com/secupolicy1/secureportal.git/' not found
```
[해결방법]
자동로그인 풀기
cmd 관리자권한으로 실행 -> `git config --system --unset credential.helper`

### 로그인 정보 입력
git clone https://gitlab.com/secupolicy1/secureportal.git
username : changjunkim@lotte.net



## FE
### BUILD 및 로컬 실행
```
# install dependencies
$ npm run install

# create env file
$ cp .env.example .env

# serve with hot reload at localhost:3000
$ npm run dev

# build for production and launch server
$ npm run build
$ npm run start

# generate static project
$ npm run generate

```
[node 버전 확인]
node-sass 4.12.0 => node 12버전

### FE 이슈
#### 특정 패키지 사이트 연결 오류
```
npm ERR! Error while executing:
npm ERR! C:\Program Files\Git\cmd\git.EXE ls-remote -h -t git://github.com/adobe-webplatform/eve.git
npm ERR!
npm ERR! fatal: unable to connect to github.com:
npm ERR! github.com[0: 20.200.245.247]: errno=Unknown error
```

[해결 방법]
브라우저에서 접속 확인 => 정상 접속
```
https://github.com/adobe-webplatform/eve
```
github에서 보안 문제로 `git://` 대신 `https://` 권장
```
git config --global url."https://".insteadOf git://
```
npm 캐시 정리 후 재설치
```
npm cache clean --force
npm install
```


#### `npm install -g npm@9.6.7 --force` npm delete 오류
[`npm install -g npm@9.6.7 --force` 오류 결과]
```
>npm install -g npm@9.6.7 --force
npm WARN using --force I sure hope you know what you are doing.
npm ERR! code EEXIST
npm ERR! path C:\Program Files\nodejs\npm.cmd
npm ERR! Refusing to delete C:\Program Files\nodejs\npm.cmd: is outside C:\Program Files\nodejs\node_modules\npm and not a link
npm ERR! File exists: C:\Program Files\nodejs\npm.cmd
npm ERR! Remove the existing file and try again, or run npm
npm ERR! with --force to overwrite files recklessly.

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\LDCC\AppData\Roaming\npm-cache\_logs\2025-08-02T04_47_34_661Z-debug.log
```

[`npm install -g npm@9.6.7` --force 제외하고 실행]
=> 실패

[실행 node, npm 위치 확인]
의도한 결과
```
C:\Users\LDCC\AppData\Roaming\nvm\v14.21.3\node.exe
C:\Users\LDCC\AppData\Roaming\nvm\v14.21.3\npm
```

실제 결과
```
C:\Program Files\nodejs\npm
C:\Program Files\nodejs\npm.cmd
```
`nvm root` 의 경로와 다름
만약 `C:\Program Files\nodejs\` 경로가 나온다면 **nvm이 적용되지 않은 상태**입니다.
`C:\Program Files\nodejs\` 경로의 Node.js가 시스템에 남아 있어서 충돌하고 있는 경우:
👉 제어판에서 기존 Node.js 제거:
- **제어판 > 프로그램 제거 > Node.js 제거**

nvm use 14.21.3
npm install -g npm@9.6.7 --force


자꾸 이상한 경로에 npm이 설치됨. 환경 변수의 path 가 영향.
기존 경로 삭제하고, nvm 이 설치된 경로 추가
nvm uninstall 
nvm install
nvm use

`echo %PATH%` 로 실제 환경 변수 확인 가능

nvm use 로 지정이 안됨


수동 지정
set PATH=C:\Users\LDCC\AppData\Roaming\nvm;C:\Users\LDCC\AppData\Roaming\nvm\v14.21.3;%PATH%

변경된 결과
```
C:\Windows\system32>where node
C:\Users\LDCC\AppData\Roaming\nvm\v14.21.3\node.exe

C:\Windows\system32>where npm
C:\Users\LDCC\AppData\Roaming\nvm\v14.21.3\npm
C:\Users\LDCC\AppData\Roaming\nvm\v14.21.3\npm.cmd

```

#### `npm run dev` cannot find module '@babel/preset-env'  오류


npm run dev 실행 시 오류
```

Module build failed (from ./node_modules/babel-loader/lib/index.js):                                                 friendly-errors 오후 10:21:07C:\Users\LDCC\offshore\2025\보안포탈\source\secureportalui\node_modules\@nuxt\babel-preset-app\src\polyfills-plugin.js:1
Error: C:\Users\LDCC\offshore\2025\보안포탈\source\secureportalui\.nuxt\client.js: Cannot find module '@babel/preset-env/lib/utils'
```



nuxt 버전과 babel-preset 호환성 오류
@nuxt/babel-preset-app => Nuxt 내부에서 자동 사용
@babel/preset-env => 별도

따라서 nuxt 2.9와 호환되는 babel/preset 을 명시적으로 맞춰 줘야 함
```
rm -rf node_modules package-lock.json .nuxt
```

nuxt 2.9.1 호환 버전으로 babel 관련 모듈 설치
```
npm install --save-dev @babel/core @babel/preset-env babel-loader


```

babel.config.js  명시적 생성
```js
module.exports = {
  presets: [
    '@nuxt/babel-preset-app'
  ]
}

```
다시 의존성 설치
npm install

캐시 제거 후 개발 서버 실행
```
npm cache clean --force
npm run dev

```

#### 특정 패키지 재설치
@babel/preset-env 최신 버전으로 소스코드 빌드 시, 오류 발생
아래 명령으로 재설치 진행
```
npm uninstall @babel/preset-env
npm install @babel/preset-env@7.12.13
```


## BE
[BUILD 및 로컬 실행]
```
# php 및 composer 설치
php 7.1.3 다운로드 
php.exe 외 다른 파일들 함께 존재해야함

# composer 설치 오류
php.exe 경로 지정하고 설치

1. composer install
    
2. composer dump-autoload
    
3. php artisan migrate
    
4. php artisan db:seed
    
5. php artisan serve -> localhost:8000 -- Sample account
    
6. Supper admin email: [supperadmin@gmail.com](mailto:supperadmin@gmail.com) pass: ldcc123!@#
    
7. General member email: [generalmembership@gmail.com](mailto:generalmembership@gmail.com) pass: ldcc123!@#
    

-- GET TOKEN:  
Endpoint: /api/login  
Body: {  
"email": "",  
"password": ""  
}
```



### DB 연결 방법
1. .env 파일 생성(기존 env.staging 파일 복사)
2. 데이터베이스 연결 정보 수정(mariadb 여도 mysql 로 작성)
```
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=33069
DB_DATABASE=secureportal
DB_USERNAME=root
DB_PASSWORD=1234
```
3. 데이터베이스 연결 확인: `php artisan tinker`
4. DB:connection()->getPdo();
#### 사용자 계정 인증 이슈
##### 현황
   MySQL 8.0 이상에서 기본 인증 방식이 `caching_sha2_password`로 설정되어 있을 때 발생
   Laravel의 PDO 드라이버는 기본적으로 `mysql_native_password` 인증 방식을 사용
```
mysql> SELECT user, host, plugin FROM mysql.user;
+------------------+-----------+-----------------------+
| user             | host      | plugin                |
+------------------+-----------+-----------------------+
| chang            | %         | caching_sha2_password |
| mysql.infoschema | localhost | caching_sha2_password |
| mysql.session    | localhost | caching_sha2_password |
| mysql.sys        | localhost | caching_sha2_password |
| root             | localhost | caching_sha2_password |
+------------------+-----------+-----------------------+
```
`SHOW PLUGINS` => mysql_native_password 의 상태 `DISABLED`


##### 계정 인증 방식 수정 (caching_sha2_password -> mysql_native_password)
`ERROR 1524 (HY000): Plugin 'mysql_native_password' is not loaded` 오류도 조치 가능
1. my.ini 에 mysql_native_password 속성 ON 상태로 수정
	C:\ProgramData\MySQL\MySQL Server 8.4\my.ini
	```
	[mysqld]
	mysql_native_password=ON
	```
2. mysql 서비스 재시작
	services.msc -> MYSQL84 재시작
	또는 net stop mysql -> net start mysql
3. 계정별 인증 방식 수정
	`ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '1234';`




## 로그인